<div class=contentwrapper>
    <!--Content wrapper-->
    <div class=heading>
        <!--  .heading-->
        <h3 translate="menu.expected_packages"></h3>
        <div class=resBtnSearch><a href="blank.html#"><span class="s16 icomoon-icon-search-3"></span></a></div>

        <ul class=breadcrumb>
            <li translate="labels.you_are_here"></li>
            <li><a href="./#home" class=tip title="back to dashboard"><i class="s16 icomoon-icon-screen-2"></i><span translate="menu.dashboard"></span></a> <span class=divider><i class="s16 icomoon-icon-arrow-right-3"></i> </span></li>
            <li class=active translate="menu.expected_packages"></li>
        </ul>
    </div>
    <!-- End  / heading--><!-- Start .row -->

    <!--<button style="margin: 5px" class="pull-right btn btn-info" ng-click="showAdd('addSources')"><i class="s16 icomoon-icon-plus-circle-2"></i><span translate="labels.add"></span><md-tooltip><span translate="help.add_another"></span> </md-tooltip></button>-->

    <div class="row">

        <table ng-if="userRecipientLevel != 1" datatable="ng" class="table table-striped table-bordered table-responsive" dt-options="dtOptions" >
            <thead>
            <tr>
                <th >#</th>
                <th translate="labels.voucher_no"></th>
                <th translate="labels.from"></th>
                <th translate="labels.transport_mode"></th>
                <th translate="labels.product"></th>
                <th translate="labels.manufacture"></th>
                <th translate="labels.lot_number"></th>
                <th translate="labels.expired_date"></th>
                <th translate="labels.doses"></th>
                <th translate="labels.vials"></th>
                <th translate="labels.total_volume"></th>
                <th translate="labels.t_price"></th>
                <th translate="labels.activity"></th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="item in expected_packages">
                <td>{{ $index+1 }}</td>
                <td>{{ item.package.voucher_number }}</td>
                <td>{{ item.recipient.name }}</td>
                <td>{{ getTransportName(item.package.transport_mode_id) }}</td>
                <td>{{ item.vaccine.name }}</td>
                <td>{{ getManufactureName(item.packaging.manufacture_id ) }}</td>
                <td>{{ item.batch_number }}</td>
                <td>{{ item.expiry_date | date:'yyyy-MMM-dd' }}</td>
                <td>{{ item.amount | number:0  }}</td>
                <td>{{ item.amount/item.packaging.dose_per_vial | number:0 }}</td>
                <td>{{ (item.amount*item.packaging.cm_per_dose)*0.001 | number:4 }}</td>
                <td>{{ main_currency }} {{ item.unit_price * item.amount | number:2 }}</td>
                <td>{{ getActivityName(item.activity) }}</td>
            </tr>
            </tbody>
        </table>

        <table ng-if="userRecipientLevel == 1" datatable="ng" class="table table-striped table-bordered" dt-options="dtOptions" >
            <thead>
            <tr>
                <th width="5%">#</th>
                <th translate="labels.voucher_no"></th>
                <th width="15%" translate="labels.packaging_id"></th>
                <th width="10%" translate="labels.source"></th>
                <th width="10%" translate="labels.product"></th>
                <th width="10%" translate="labels.lot_number"></th>
                <th width="10%" translate="labels.expired_date"></th>
                <th width="10%" translate="labels.status"></th>
                <th width="10%" translate="labels.action">Action</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="item in pre_shipments" ng-hide="deletedItem[item.id]">
                <td>{{ $index+1 }}</td>
                <td>{{ item.reference }}</td>
                <td>{{ item.package_id }}</td>
                <td>{{ item.source.name }}</td>
                <td>{{ item.vaccine.name }}</td>
                <td>{{ item.lot_number }}</td>
                <td>{{ item.expired_date | date:'yyyy-MM-dd' }}</td>
                <td ng-if="item.status == 'pending'" translate="labels.pending"></td>
                <td ng-if="item.status == 'received'" translate="labels.received"></td>
                <td>
                    <md-button aria-label="btu" ng-if="hasRole(userRoles,'update_preadvicenotice')" class="md-hue-3 md-raised  md-fab"  ng-click="showAEdit(item,'updatePreAdvice')"><i class="fa fa-pencil-square"></i>
                        <md-tooltip>
                            <span translate="help.update"></span>
                        </md-tooltip>
                    </md-button>
                    <md-button  aria-label="btu" ng-if="hasRole(userRoles,'delete_preadvicenotice')" ng-if="!deletingItem[item.id]" class="md-hue-3 md-raised md-warn md-fab"  ng-click="showConfirm($event,item.id,'pre_shipments')"><i class="fa fa-trash-o"></i>

                        <md-tooltip>
                            <span translate="help.delete"></span>
                        </md-tooltip>
                    </md-button>
                    <span ng-if="deletingItem[item.id]"><i class="fa fa-spin fa-spinner"></i> <span translate="labels.deleting"></span></span>
                </td>
            </tr>
            </tbody>
        </table>

    </div>
    <!-- End .row -->
</div>


